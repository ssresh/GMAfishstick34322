(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{127:function(e,t,n){"use strict";n(46),n(654),n(48),n(154),n(332),n(32),n(67);var r=n(568),s=n(569),a=n.n(s),i=n(266);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=/(^|[^@\w])@(\w{1,15})\b/g,l=/(^|\s)#(\w+)/g,d=/mention:\/\/(user|team)\/(\d+)\/(.+)/gm,m=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];o(this,e),this.message=a.a.sanitize(Object(i.c)(t||"")),this.isAPrivateNote=s,this.isATweet=n,this.marked=r.marked;var c={heading:function(e){return"<strong>".concat(e,"</strong>")},link:function(e,t,n){var r=new RegExp(d);return e.match(r)?'<span class="prosemirror-mention-node">'.concat(n,"</span>"):'<a rel="noreferrer noopener nofollow" href="'.concat(e,'" class="link" title="').concat(t||"",'" target="_blank">').concat(n,"</a>")}};this.marked.use({renderer:c})}var t,n,s;return t=e,(n=[{key:"formatMessage",value:function(){if(this.isATweet&&!this.isAPrivateNote){var e=this.message.replace(u,'$1<a href="http://twitter.com/$2" target="_blank" rel="noreferrer nofollow noopener">@$2</a>').replace(l,'$1<a href="https://twitter.com/hashtag/$2" target="_blank" rel="noreferrer nofollow noopener">#$2</a>');return Object(r.marked)(e)}return a.a.addHook("afterSanitizeAttributes",i.a),a.a.sanitize(Object(r.marked)(this.message,{breaks:!0,gfm:!0}))}},{key:"formattedMessage",get:function(){return this.formatMessage()}},{key:"plainText",get:function(){return(new DOMParser).parseFromString(this.formattedMessage,"text/html").body.textContent||""}}])&&c(t.prototype,n),s&&c(t,s),e}(),p=m;t.a={methods:{formatMessage:function(e,t,n){return new p(e,t,n).formattedMessage},getPlainText:function(e,t){return new p(e,t).plainText},truncateMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.length<100?e:"".concat(e.slice(0,97),"...")}}}},1911:function(e,t,n){"use strict";n(651)},1912:function(e,t,n){"use strict";n(652)},2637:function(e,t,n){e.exports=n.p+"media/dashboard/assets/images/chatwoot_bot-905112376e6493b37e2cecea8f9dc50c.png"},2707:function(e,t,n){},2708:function(e,t,n){},2709:function(e,t,n){},2710:function(e,t,n){},2711:function(e,t,n){},2712:function(e,t,n){},2713:function(e,t,n){},2714:function(e,t,n){},2715:function(e,t,n){},2716:function(e,t,n){},2717:function(e,t,n){},2718:function(e,t,n){},2719:function(e,t,n){},2720:function(e,t,n){},2721:function(e,t,n){},2722:function(e,t,n){},2723:function(e,t,n){},2724:function(e,t,n){},2725:function(e,t,n){},2726:function(e,t,n){},2855:function(e,t,n){"use strict";n(2707)},2856:function(e,t,n){"use strict";n(2708)},2857:function(e,t,n){"use strict";n(2709)},2858:function(e,t,n){"use strict";n(2710)},2859:function(e,t,n){"use strict";n(2711)},2860:function(e,t,n){"use strict";n(2712)},2861:function(e,t,n){"use strict";n(2713)},2862:function(e,t,n){"use strict";n(2714)},2863:function(e,t,n){"use strict";n(2715)},2864:function(e,t,n){"use strict";n(2716)},2865:function(e,t,n){"use strict";n(2717)},2866:function(e,t,n){"use strict";n(2718)},2867:function(e,t,n){"use strict";n(2719)},2868:function(e,t,n){"use strict";n(2720)},2869:function(e,t,n){"use strict";n(2721)},2870:function(e,t,n){"use strict";n(2722)},2871:function(e,t,n){"use strict";n(2723)},2872:function(e,t,n){e.exports=n.p+"media/widget/assets/images/typing-6027d21b24f45e3377a729a55158f948.gif"},2873:function(e,t,n){"use strict";n(2724)},2874:function(e,t,n){"use strict";n(2725)},2875:function(e,t,n){"use strict";n(2726)},2880:function(e,t,n){"use strict";n.r(t);n(7),n(3),n(5),n(10),n(8),n(11);var r=n(4),s=(n(6),n(18),n(19),n(153)),a=n(653),i=(n(21),n(26),n(25),n(32),n(563),n(61)),o=(n(55),n(69),n(238),n(661)),c=n.n(o),u=n(66),l=n(503),d=n(50),m=n(83),p=n(280),f=n(589);function g(e,t,n,r,s,a,i){try{var o=e[a](i),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,s)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function i(e){g(a,r,s,i,o,"next",e)}function o(e){g(a,r,s,i,o,"throw",e)}i(void 0)}))}}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O={components:{FluentIcon:p.a,FileUpload:c.a,Spinner:u.a},props:{onAttach:{type:Function,default:function(){}}},data:function(){return{isUploading:!1}},computed:v(v({},Object(r.mapGetters)({globalConfig:"globalConfig/get"})),{},{fileUploadSizeLimit:function(){return d.f},allowedFileTypes:function(){return d.a}}),mounted:function(){document.addEventListener("paste",this.handleClipboardPaste)},destroyed:function(){document.removeEventListener("paste",this.handleClipboardPaste)},methods:{handleClipboardPaste:function(e){var t=this;(e.clipboardData||e.originalEvent.clipboardData).items.forEach((function(n){if("file"===n.kind){e.preventDefault();var r=n.getAsFile();t.$refs.upload.add(r)}}))},getFileType:function(e){return e.includes("image")?"image":"file"},onFileUpload:function(e){var t=this;return b(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.globalConfig.directUploadsEnabled){n.next=5;break}return n.next=3,t.onDirectFileUpload(e);case 3:n.next=7;break;case 5:return n.next=7,t.onIndirectFileUpload(e);case 7:case"end":return n.stop()}}),n)})))()},onDirectFileUpload:function(e){var t=this;return b(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:t.isUploading=!0;try{Object(l.a)(e,d.f)?(r=window.chatwootWebChannel.websiteToken,new f.DirectUpload(e.file,"/api/v1/widget/direct_uploads?website_token=".concat(r),{directUploadWillCreateBlobWithXHR:function(e){e.setRequestHeader("X-Auth-Token",window.authToken)}}).create((function(n,r){n?window.bus.$emit(m.a.SHOW_ALERT,{message:n}):t.onAttach(v({file:r.signed_id},t.getLocalFileAttributes(e)))}))):window.bus.$emit(m.a.SHOW_ALERT,{message:t.$t("FILE_SIZE_LIMIT",{MAXIMUM_FILE_UPLOAD_SIZE:t.fileUploadSizeLimit})})}catch(s){}t.isUploading=!1;case 5:case"end":return n.stop()}}),n)})))()},onIndirectFileUpload:function(e){var t=this;return b(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:if(t.isUploading=!0,n.prev=3,!Object(l.a)(e,d.f)){n.next=9;break}return n.next=7,t.onAttach(v({file:e.file},t.getLocalFileAttributes(e)));case 7:n.next=10;break;case 9:window.bus.$emit(m.a.SHOW_ALERT,{message:t.$t("FILE_SIZE_LIMIT",{MAXIMUM_FILE_UPLOAD_SIZE:t.fileUploadSizeLimit})});case 10:n.next=14;break;case 12:n.prev=12,n.t0=n.catch(3);case 14:t.isUploading=!1;case 15:case"end":return n.stop()}}),n,null,[[3,12]])})))()},getLocalFileAttributes:function(e){return{thumbUrl:window.URL.createObjectURL(e.file),fileType:this.getFileType(e.type)}}}},C=n(1),w=Object(C.a)(O,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("file-upload",{ref:"upload",attrs:{size:8388608,accept:e.allowedFileTypes,data:{direct_upload_url:"/api/v1/widget/direct_uploads",direct_upload:!0}},on:{"input-file":e.onFileUpload}},[n("button",{staticClass:"icon-button flex items-center justify-center"},[e.isUploading.image?e._e():n("fluent-icon",{attrs:{icon:"attach"}}),e._v(" "),e.isUploading?n("spinner",{attrs:{size:"small"}}):e._e()],1)])}),[],!1,null,null,null).exports,_={components:{FluentIcon:p.a,Spinner:u.a},props:{loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},onClick:{type:Function,default:function(){}},color:{type:String,default:"#6e6f73"}}},k=Object(C.a)(_,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("button",{staticClass:"icon-button flex items-center justify-center ml-1",attrs:{type:"submit",disabled:e.disabled},on:{click:e.onClick}},[e.loading?n("spinner",{attrs:{size:"small"}}):n("fluent-icon",{style:"color: "+e.color,attrs:{icon:"send"}})],1)}),[],!1,null,null,null).exports,j=n(331),x=n(342),S=n(256);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T={name:"ChatInputWrap",components:{ChatAttachmentButton:w,ChatSendButton:k,EmojiInput:function(){return n.e(2).then(n.bind(null,2905))},FluentIcon:p.a,ResizableTextArea:x.a},mixins:[i.mixin,j.a,S.a],props:{onSendMessage:{type:Function,default:function(){}},onSendAttachment:{type:Function,default:function(){}}},data:function(){return{userInput:"",showEmojiPicker:!1,isFocused:!1}},computed:P(P({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor",isWidgetOpen:"appConfig/getIsWidgetOpen"})),{},{showAttachment:function(){return this.hasAttachmentsEnabled&&0===this.userInput.length},showSendButton:function(){return this.userInput.length>0},inputColor:function(){return"".concat(this.$dm("bg-white","dark:bg-slate-600"),"\n        ").concat(this.$dm("text-black-900","dark:text-slate-50"))},emojiIconColor:function(){return this.showEmojiPicker?"text-woot-500 ".concat(this.$dm("text-black-900","dark:text-slate-100")):"".concat(this.$dm("text-black-900","dark:text-slate-100"))}}),watch:{isWidgetOpen:function(e){e&&this.focusInput()}},destroyed:function(){document.removeEventListener("keypress",this.handleEnterKeyPress)},mounted:function(){document.addEventListener("keypress",this.handleEnterKeyPress),this.isWidgetOpen&&this.focusInput()},methods:{onBlur:function(){this.isFocused=!1},onFocus:function(){this.isFocused=!0},handleButtonClick:function(){this.userInput&&this.userInput.trim()&&this.onSendMessage(this.userInput),this.userInput="",this.focusInput()},handleEnterKeyPress:function(e){13!==e.keyCode||e.shiftKey||(e.preventDefault(),this.handleButtonClick())},toggleEmojiPicker:function(){this.showEmojiPicker=!this.showEmojiPicker},hideEmojiPicker:function(e){this.showEmojiPicker&&(e.stopPropagation(),this.toggleEmojiPicker())},emojiOnClick:function(e){this.userInput="".concat(this.userInput).concat(e," ")},onTypingOff:function(){this.toggleTyping("off")},onTypingOn:function(){this.toggleTyping("on")},toggleTyping:function(e){this.$store.dispatch("conversation/toggleUserTyping",{typingStatus:e})},focusInput:function(){this.$refs.chatInput.focus()}}},I=(n(2855),Object(C.a)(T,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-message--input is-focused",class:e.$dm("bg-white ","dark:bg-slate-600"),on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.hideEmojiPicker(t)}}},[n("resizable-text-area",{ref:"chatInput",staticClass:"form-input user-message-input is-focused",class:e.inputColor,attrs:{id:"chat-input","aria-label":e.$t("CHAT_PLACEHOLDER"),placeholder:e.$t("CHAT_PLACEHOLDER")},on:{"typing-off":e.onTypingOff,"typing-on":e.onTypingOn,focus:e.onFocus,blur:e.onBlur},model:{value:e.userInput,callback:function(t){e.userInput=t},expression:"userInput"}}),e._v(" "),n("div",{staticClass:"button-wrap"},[e.showAttachment?n("chat-attachment-button",{class:e.$dm("text-black-900","dark:text-slate-100"),attrs:{"on-attach":e.onSendAttachment}}):e._e(),e._v(" "),e.hasEmojiPickerEnabled?n("button",{staticClass:"icon-button flex justify-center items-center",attrs:{"aria-label":"Emoji picker"},on:{click:e.toggleEmojiPicker}},[n("fluent-icon",{class:e.emojiIconColor,attrs:{icon:"emoji"}})],1):e._e(),e._v(" "),e.showEmojiPicker?n("emoji-input",{directives:[{name:"on-clickaway",rawName:"v-on-clickaway",value:e.hideEmojiPicker,expression:"hideEmojiPicker"}],attrs:{"on-click":e.emojiOnClick},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.hideEmojiPicker(t)}}}):e._e(),e._v(" "),e.showSendButton?n("chat-send-button",{attrs:{"on-click":e.handleButtonClick,color:e.widgetColor}}):e._e()],1)],1)}),[],!1,null,"0d960123",null).exports),$=n(235),D=n(566);function F(e,t,n,r,s,a,i){try{var o=e[a](i),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,s)}function M(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function i(e){F(a,r,s,i,o,"next",e)}function o(e){F(a,r,s,i,o,"throw",e)}i(void 0)}))}}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U={components:{ChatInputWrap:I,CustomButton:a.a},mixins:[D.a],props:{msg:{type:String,default:""}},computed:L(L({},Object(r.mapGetters)({conversationAttributes:"conversationAttributes/getConversationParams",widgetColor:"appConfig/getWidgetColor",conversationSize:"conversation/getConversationSize",currentUser:"contacts/getCurrentUser",isWidgetStyleFlat:"appConfig/isWidgetStyleFlat"})),{},{textColor:function(){return Object(s.c)(this.widgetColor)},hideReplyBox:function(){var e=window.chatwootWebChannel.allowMessagesAfterResolved,t=this.conversationAttributes.status;return!e&&"resolved"===t},showEmailTranscriptButton:function(){return this.currentUser&&this.currentUser.email}}),methods:L(L(L({},Object(r.mapActions)("conversation",["sendMessage","sendAttachment","clearConversations"])),Object(r.mapActions)("conversationAttributes",["getAttributes","clearConversationAttributes"])),{},{handleSendMessage:function(e){var t=this;return M(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.sendMessage({content:e});case 2:0===t.conversationSize&&t.getAttributes();case 3:case"end":return n.stop()}}),n)})))()},handleSendAttachment:function(e){this.sendAttachment({attachment:e})},startNewConversation:function(){this.clearConversations(),this.clearConversationAttributes(),this.replaceRoute("prechat-form",{disableContactFields:!0})},sendTranscript:function(){var e=this;return M(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.currentUser.email)){t.next=11;break}return t.prev=2,t.next=5,Object($.e)({email:n});case 5:window.bus.$emit(m.a.SHOW_ALERT,{message:e.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_SUCCESS"),type:"success"}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),window.bus.$emit(m.a.SHOW_ALERT,{message:e.$t("EMAIL_TRANSCRIPT.SEND_EMAIL_ERROR")});case 11:case"end":return t.stop()}}),t,null,[[2,8]])})))()}})},V=(n(2856),Object(C.a)(U,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.hideReplyBox?n("div",[n("custom-button",{staticClass:"font-medium",attrs:{block:"","bg-color":e.widgetColor,"text-color":e.textColor},on:{click:e.startNewConversation}},[e._v("\n    "+e._s(e.$t("START_NEW_CONVERSATION"))+"\n  ")]),e._v(" "),e.showEmailTranscriptButton?n("custom-button",{staticClass:"font-normal",attrs:{type:"clear"},on:{click:e.sendTranscript}},[e._v("\n    "+e._s(e.$t("EMAIL_TRANSCRIPT.BUTTON_TEXT"))+"\n  ")]):e._e()],1):n("footer",{staticClass:"shadow-sm bg-white mb-1 z-50 relative",class:{"rounded-lg":!e.isWidgetStyleFlat}},[n("chat-input-wrap",{attrs:{"on-send-message":e.handleSendMessage,"on-send-attachment":e.handleSendAttachment}})],1)}),[],!1,null,"39ce78de",null).exports),N=(n(22),n(41),n(27),n(29),n(46),n(49),n(127)),z={name:"UserMessageBubble",mixins:[N.a],props:{message:{type:String,default:""},status:{type:String,default:""},widgetColor:{type:String,default:""}},computed:{textColor:function(){return Object(s.c)(this.widgetColor)}}},W=(n(2857),Object(C.a)(z,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:e.formatMessage(e.message,!1),expression:"formatMessage(message, false)"}],staticClass:"chat-bubble user",style:{background:e.widgetColor,color:e.textColor}})}),[],!1,null,"2538e73a",null).exports),q={props:{url:{type:String,default:""},thumb:{type:String,default:""},readableTime:{type:String,default:""}},methods:{onImgError:function(){this.$emit("error")},onClick:function(){this.$emit("click")}}},H=(n(2858),Object(C.a)(q,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a",{staticClass:"image",attrs:{href:e.url,target:"_blank",rel:"noreferrer noopener nofollow"}},[n("div",{staticClass:"wrap"},[n("img",{attrs:{src:e.thumb,alt:"Picture message"},on:{click:e.onClick,error:e.onImgError}}),e._v(" "),n("span",{staticClass:"time"},[e._v(e._s(e.readableTime))])])])}),[],!1,null,"674f83bd",null).exports),G={components:{FluentIcon:p.a},mixins:[S.a],props:{url:{type:String,default:""},isInProgress:{type:Boolean,default:!1},widgetColor:{type:String,default:""},isUserBubble:{type:Boolean,default:!1}},computed:{title:function(){return this.isInProgress?this.$t("COMPONENTS.FILE_BUBBLE.UPLOADING"):decodeURI(this.fileName)},fileName:function(){return this.url.substring(this.url.lastIndexOf("/")+1)},contrastingTextColor:function(){return Object(s.c)(this.widgetColor)},textColor:function(){return this.isUserBubble&&this.widgetColor?this.contrastingTextColor:""},titleColor:function(){return this.isUserBubble?"":this.$dm("text-black-900","dark:text-slate-50")}},methods:{openLink:function(){window.open(this.url,"_blank").focus()}}},K=(n(2859),Object(C.a)(G,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file flex flex-row items-center p-3 cursor-pointer"},[n("div",{staticClass:"icon-wrap",style:{color:e.textColor}},[n("fluent-icon",{attrs:{icon:"document",size:"28"}})],1),e._v(" "),n("div",{staticClass:"meta"},[n("div",{staticClass:"title",class:e.titleColor,style:{color:e.textColor}},[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),n("div",{staticClass:"link-wrap mb-1"},[n("a",{staticClass:"download",style:{color:e.textColor},attrs:{rel:"noreferrer noopener nofollow",target:"_blank",href:e.url}},[e._v("\n        "+e._s(e.$t("COMPONENTS.FILE_BUBBLE.DOWNLOAD"))+"\n      ")])])])])}),[],!1,null,"3fc1205c",null).exports),Y=n(92),Z={computed:{messageContentAttributes:function(){var e=this.message.content_attributes;return void 0===e?{}:e},hasAttachments:function(){return!!(this.message.attachments&&this.message.attachments.length>0)}}};function X(e,t,n,r,s,a,i){try{var o=e[a](i),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,s)}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te={name:"UserMessage",components:{UserMessageBubble:W,ImageBubble:H,FileBubble:K,FluentIcon:p.a},mixins:[Y.a,Z],props:{message:{type:Object,default:function(){}}},data:function(){return{hasImageError:!1}},computed:Q(Q({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{isInProgress:function(){var e=this.message.status;return"in_progress"===(void 0===e?"":e)},showTextBubble:function(){return!!this.message.content},readableTime:function(){var e=this.message.created_at,t=void 0===e?"":e;return this.messageStamp(t)},isFailed:function(){var e=this.message.status;return"failed"===(void 0===e?"":e)},errorMessage:function(){var e=this.message.meta;return e?e.error:this.$t("COMPONENTS.MESSAGE_BUBBLE.ERROR_MESSAGE")}}),watch:{message:function(){this.hasImageError=!1}},mounted:function(){this.hasImageError=!1},methods:{retrySendMessage:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("conversation/sendMessageWithData",t.message);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function i(e){X(a,r,s,i,o,"next",e)}function o(e){X(a,r,s,i,o,"throw",e)}i(void 0)}))})()},onImageLoadError:function(){this.hasImageError=!0}}},ne=te,re=Object(C.a)(ne,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-message-wrap"},[n("div",{staticClass:"user-message"},[n("div",{staticClass:"message-wrap",class:{"in-progress":e.isInProgress,"is-failed":e.isFailed}},[e.showTextBubble?n("user-message-bubble",{attrs:{message:e.message.content,status:e.message.status,"widget-color":e.widgetColor}}):e._e(),e._v(" "),e.hasAttachments?n("div",{staticClass:"chat-bubble has-attachment user",style:{backgroundColor:e.widgetColor}},e._l(e.message.attachments,(function(t){return n("div",{key:t.id},["image"!==t.file_type||e.hasImageError?n("file-bubble",{attrs:{url:t.data_url,"is-in-progress":e.isInProgress,"widget-color":e.widgetColor,"is-user-bubble":""}}):n("image-bubble",{attrs:{url:t.data_url,thumb:t.data_url,"readable-time":e.readableTime},on:{error:e.onImageLoadError}})],1)})),0):e._e(),e._v(" "),e.isFailed?n("div",{staticClass:"flex justify-end align-middle px-4 py-2 text-red-700"},[e.hasAttachments?e._e():n("button",{staticClass:"inline-flex justify-center items-center ml-2",attrs:{title:e.$t("COMPONENTS.MESSAGE_BUBBLE.RETRY")},on:{click:e.retrySendMessage}},[n("fluent-icon",{attrs:{icon:"arrow-clockwise",size:"14"}})],1)]):e._e()],1)])])}),[],!1,null,null,null).exports;n(30);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe={components:{},props:{action:{type:Object,default:function(){}}},computed:ae(ae({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{textColor:function(){return Object(s.c)(this.widgetColor)},isLink:function(){return"link"===this.action.type}}),methods:{onClick:function(){}}},ce=(n(2860),{components:{CardButton:Object(C.a)(oe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isLink?n("a",{key:e.action.uri,staticClass:"action-button button",style:{background:e.widgetColor,borderColor:e.widgetColor,color:e.textColor},attrs:{href:e.action.uri,target:"_blank",rel:"noopener nofollow noreferrer"}},[e._v("\n  "+e._s(e.action.text)+"\n")]):n("button",{key:e.action.payload,staticClass:"action-button button",style:{borderColor:e.widgetColor,color:e.widgetColor},on:{click:e.onClick}},[e._v("\n  "+e._s(e.action.text)+"\n")])}),[],!1,null,"4071c27e",null).exports},mixins:[S.a],props:{title:{type:String,default:""},description:{type:String,default:""},mediaUrl:{type:String,default:""},actions:{type:Array,default:function(){return[]}},showAvatar:Boolean},computed:{}}),ue=(n(2861),Object(C.a)(ce,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card-message chat-bubble agent",class:e.$dm("bg-white","dark:bg-slate-700")},[n("img",{staticClass:"media",attrs:{src:e.mediaUrl}}),e._v(" "),n("div",{staticClass:"card-body"},[n("h4",{staticClass:"title",class:e.$dm("text-black-900","dark:text-slate-50")},[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),n("p",{staticClass:"body",class:e.$dm("text-black-700","dark:text-slate-100")},[e._v("\n      "+e._s(e.description)+"\n    ")]),e._v(" "),e._l(e.actions,(function(e){return n("card-button",{key:e.id,attrs:{action:e}})}))],2)])}),[],!1,null,"89f66a76",null).exports);function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){me(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe={mixins:[S.a],props:{buttonLabel:{type:String,default:""},items:{type:Array,default:function(){return[]}},submittedValues:{type:Array,default:function(){return[]}}},data:function(){return{formValues:{},hasSubmitted:!1}},computed:de(de({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{textColor:function(){return Object(s.c)(this.widgetColor)},inputColor:function(){return"".concat(this.$dm("bg-white","dark:bg-slate-600"),"\n        ").concat(this.$dm("text-black-900","dark:text-slate-50"))},isFormValid:function(){var e=this;return this.items.reduce((function(t,n){var r=n.name;return!!e.formValues[r]&&t}),!0)}}),mounted:function(){this.submittedValues.length?this.updateFormValues():this.setFormDefaults()},methods:{onSubmitClick:function(){this.hasSubmitted=!0},onSubmit:function(){this.isFormValid&&this.$emit("submit",this.formValues)},buildFormObject:function(e){return e.reduce((function(e,t){return de(de({},e),{},me({},t.name,t.value||t.default))}),{})},updateFormValues:function(){this.formValues=this.buildFormObject(this.submittedValues)},setFormDefaults:function(){this.formValues=this.buildFormObject(this.items)}}},fe=(n(2862),Object(C.a)(pe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"form chat-bubble agent",class:e.$dm("bg-white","dark:bg-slate-700")},[n("form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[e._l(e.items,(function(t){return n("div",{key:t.key,staticClass:"form-block",class:{"has-submitted":e.hasSubmitted}},[n("label",{class:e.$dm("text-black-900","dark:text-slate-50")},[e._v(e._s(t.label))]),e._v(" "),"checkbox"===t.type&&"email"===t.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.formValues[t.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{pattern:t.regex,title:t.title,required:t.required&&"required",name:t.name,placeholder:t.placeholder,disabled:!!e.submittedValues.length,type:"checkbox"},domProps:{checked:Array.isArray(e.formValues[t.name])?e._i(e.formValues[t.name],null)>-1:e.formValues[t.name]},on:{change:function(n){var r=e.formValues[t.name],s=n.target,a=!!s.checked;if(Array.isArray(r)){var i=e._i(r,null);s.checked?i<0&&e.$set(e.formValues,t.name,r.concat([null])):i>-1&&e.$set(e.formValues,t.name,r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.formValues,t.name,a)}}}):"radio"===t.type&&"email"===t.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.formValues[t.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{pattern:t.regex,title:t.title,required:t.required&&"required",name:t.name,placeholder:t.placeholder,disabled:!!e.submittedValues.length,type:"radio"},domProps:{checked:e._q(e.formValues[t.name],null)},on:{change:function(n){return e.$set(e.formValues,t.name,null)}}}):"email"===t.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.formValues[t.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{pattern:t.regex,title:t.title,required:t.required&&"required",name:t.name,placeholder:t.placeholder,disabled:!!e.submittedValues.length,type:t.type},domProps:{value:e.formValues[t.name]},on:{input:function(n){n.target.composing||e.$set(e.formValues,t.name,n.target.value)}}}):"text"===t.type?"checkbox"===t.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.formValues[t.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{required:t.required&&"required",pattern:t.pattern,title:t.title,name:t.name,placeholder:t.placeholder,disabled:!!e.submittedValues.length,type:"checkbox"},domProps:{checked:Array.isArray(e.formValues[t.name])?e._i(e.formValues[t.name],null)>-1:e.formValues[t.name]},on:{change:function(n){var r=e.formValues[t.name],s=n.target,a=!!s.checked;if(Array.isArray(r)){var i=e._i(r,null);s.checked?i<0&&e.$set(e.formValues,t.name,r.concat([null])):i>-1&&e.$set(e.formValues,t.name,r.slice(0,i).concat(r.slice(i+1)))}else e.$set(e.formValues,t.name,a)}}}):"radio"===t.type?n("input",{directives:[{name:"model",rawName:"v-model",value:e.formValues[t.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{required:t.required&&"required",pattern:t.pattern,title:t.title,name:t.name,placeholder:t.placeholder,disabled:!!e.submittedValues.length,type:"radio"},domProps:{checked:e._q(e.formValues[t.name],null)},on:{change:function(n){return e.$set(e.formValues,t.name,null)}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:e.formValues[t.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{required:t.required&&"required",pattern:t.pattern,title:t.title,name:t.name,placeholder:t.placeholder,disabled:!!e.submittedValues.length,type:t.type},domProps:{value:e.formValues[t.name]},on:{input:function(n){n.target.composing||e.$set(e.formValues,t.name,n.target.value)}}}):"text_area"===t.type?n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.formValues[t.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{required:t.required&&"required",title:t.title,name:t.name,placeholder:t.placeholder,disabled:!!e.submittedValues.length},domProps:{value:e.formValues[t.name]},on:{input:function(n){n.target.composing||e.$set(e.formValues,t.name,n.target.value)}}}):"select"===t.type?n("select",{directives:[{name:"model",rawName:"v-model",value:e.formValues[t.name],expression:"formValues[item.name]"}],class:e.inputColor,attrs:{required:t.required&&"required"},on:{change:function(n){var r=Array.prototype.filter.call(n.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.formValues,t.name,n.target.multiple?r:r[0])}}},e._l(t.options,(function(t){return n("option",{key:t.key,domProps:{value:t.value}},[e._v("\n          "+e._s(t.label)+"\n        ")])})),0):e._e(),e._v(" "),n("span",{staticClass:"error-message"},[e._v("\n        "+e._s(t.pattern_error||e.$t("CHAT_FORM.INVALID.FIELD"))+"\n      ")])])})),e._v(" "),e.submittedValues.length?e._e():n("button",{staticClass:"button block",style:{background:e.widgetColor,borderColor:e.widgetColor,color:e.textColor},attrs:{type:"submit"},on:{click:e.onSubmitClick}},[e._v("\n      "+e._s(e.buttonLabel||e.$t("COMPONENTS.FORM_BUBBLE.SUBMIT"))+"\n    ")])],2)])}),[],!1,null,"28b9fbb6",null).exports);function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he={components:{},props:{action:{type:Object,default:function(){}},isSelected:{type:Boolean,default:!1}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),methods:{onClick:function(){this.$emit("click",this.action)}}},ve=he,ye=(n(2863),{components:{ChatOption:Object(C.a)(ve,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{staticClass:"option",class:{"is-selected":e.isSelected},style:{borderColor:e.widgetColor}},[n("button",{staticClass:"option-button button",on:{click:e.onClick}},[n("span",{style:{color:e.widgetColor}},[e._v(e._s(e.action.title))])])])}),[],!1,null,"dddfa04c",null).exports},mixins:[S.a],props:{title:{type:String,default:""},options:{type:Array,default:function(){return[]}},selected:{type:String,default:""},hideFields:{type:Boolean,default:!1}},methods:{isSelected:function(e){return this.selected===e.id},onClick:function(e){this.$emit("click",e)}}}),Oe=(n(2864),n(2865),Object(C.a)(ye,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"options-message chat-bubble agent",class:e.$dm("bg-white","dark:bg-slate-700")},[n("div",{staticClass:"card-body"},[n("h4",{staticClass:"title",class:e.$dm("text-black-900","dark:text-slate-50")},[e._v("\n      "+e._s(e.title)+"\n    ")]),e._v(" "),e.hideFields?e._e():n("ul",{staticClass:"options",class:{"has-selected":!!e.selected}},e._l(e.options,(function(t){return n("chat-option",{key:t.id,attrs:{action:t,"is-selected":e.isSelected(t)},on:{click:e.onClick}})})),1)])])}),[],!1,null,"d07851ae",null).exports),Ce={components:{FluentIcon:p.a},mixins:[N.a,S.a],props:{items:{type:Array,default:function(){return[]}}}},we=(n(2866),Object(C.a)(Ce,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.items.length?n("div",{staticClass:"chat-bubble agent",class:e.$dm("bg-white","dark:bg-slate-700")},e._l(e.items,(function(t){return n("div",{key:t.link,staticClass:"article-item"},[n("a",{attrs:{href:t.link,target:"_blank",rel:"noopener noreferrer nofollow"}},[n("span",{staticClass:"title flex items-center text-black-900 font-medium"},[n("fluent-icon",{staticClass:"mr-1",class:e.$dm("text-black-900","dark:text-slate-50"),attrs:{icon:"link"}}),e._v(" "),n("span",{class:e.$dm("text-slate-900","dark:text-slate-50")},[e._v(e._s(t.title))])],1),e._v(" "),n("span",{staticClass:"description",class:e.$dm("text-slate-700","dark:text-slate-200")},[e._v("\n        "+e._s(e.truncateMessage(t.description))+"\n      ")])])])})),0):e._e()}),[],!1,null,"feefd62e",null).exports),_e=n(14);function ke(e,t,n,r,s,a,i){try{var o=e[a](i),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,s)}function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ee={components:{FluentIcon:p.a,Spinner:u.a},mixins:[S.a],props:{messageId:{type:Number,required:!0},messageContentAttributes:{type:Object,default:function(){}}},data:function(){return{email:"",isUpdating:!1}},computed:xe(xe({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{textColor:function(){return Object(s.c)(this.widgetColor)},hasSubmitted:function(){return this.messageContentAttributes&&this.messageContentAttributes.submitted_email},inputColor:function(){return"".concat(this.$dm("bg-white","dark:bg-slate-600"),"\n        ").concat(this.$dm("text-black-900","dark:text-slate-50"))},inputHasError:function(){return this.$v.email.$error?"".concat(this.inputColor," error"):"".concat(this.inputColor)}}),validations:{email:{required:_e.required,email:_e.email}},methods:{onSubmit:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$v.$invalid){e.next=2;break}return e.abrupt("return");case 2:return t.isUpdating=!0,e.prev=3,e.next=6,t.$store.dispatch("message/update",{email:t.email,messageId:t.messageId});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(3);case 10:return e.prev=10,t.isUpdating=!1,e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[3,8,10,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function i(e){ke(a,r,s,i,o,"next",e)}function o(e){ke(a,r,s,i,o,"throw",e)}i(void 0)}))})()}}},Pe=Ee,Ae=(n(2867),Object(C.a)(Pe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.hasSubmitted?e._e():n("form",{staticClass:"email-input-group",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.email,expression:"email",modifiers:{trim:!0}}],staticClass:"form-input",class:e.inputHasError,attrs:{placeholder:e.$t("EMAIL_PLACEHOLDER")},domProps:{value:e.email},on:{input:[function(t){t.target.composing||(e.email=t.target.value.trim())},e.$v.email.$touch],keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),n("button",{staticClass:"button small",style:{background:e.widgetColor,borderColor:e.widgetColor,color:e.textColor},attrs:{disabled:e.$v.email.$invalid}},[e.isUpdating?n("spinner",{staticClass:"mx-2"}):n("fluent-icon",{attrs:{icon:"chevron-right"}})],1)])])}),[],!1,null,"7b523820",null).exports);function Te(e,t,n,r,s,a,i){try{var o=e[a](i),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,s)}function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){De(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fe={components:{Spinner:u.a,FluentIcon:p.a},mixins:[S.a],props:{messageContentAttributes:{type:Object,default:function(){}},messageId:{type:Number,required:!0}},data:function(){return{email:"",ratings:d.e,selectedRating:null,isUpdating:!1,feedback:""}},computed:$e($e({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{isRatingSubmitted:function(){var e,t;return null===(e=this.messageContentAttributes)||void 0===e||null===(t=e.csat_survey_response)||void 0===t?void 0:t.rating},isFeedbackSubmitted:function(){var e,t;return null===(e=this.messageContentAttributes)||void 0===e||null===(t=e.csat_survey_response)||void 0===t?void 0:t.feedback_message},isButtonDisabled:function(){return!(this.selectedRating&&this.feedback)},inputColor:function(){return"".concat(this.$dm("bg-white","dark:bg-slate-600"),"\n        ").concat(this.$dm("text-black-900","dark:text-slate-50"))},textColor:function(){return Object(s.c)(this.widgetColor)},title:function(){return this.isRatingSubmitted?this.$t("CSAT.SUBMITTED_TITLE"):this.$t("CSAT.TITLE")}}),mounted:function(){if(this.isRatingSubmitted){var e=this.messageContentAttributes.csat_survey_response,t=e.rating,n=e.feedback_message;this.selectedRating=t,this.feedback=n}},methods:{buttonClass:function(e){return[{selected:e.value===this.selectedRating},{disabled:this.isRatingSubmitted},{hover:this.isRatingSubmitted},"emoji-button"]},onSubmit:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isUpdating=!0,e.prev=1,e.next=4,t.$store.dispatch("message/update",{submittedValues:{csat_survey_response:{rating:t.selectedRating,feedback_message:t.feedback}},messageId:t.messageId});case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:return e.prev=8,t.isUpdating=!1,e.finish(8);case 11:case"end":return e.stop()}}),e,null,[[1,6,8,11]])})),function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function i(e){Te(a,r,s,i,o,"next",e)}function o(e){Te(a,r,s,i,o,"throw",e)}i(void 0)}))})()},selectRating:function(e){this.selectedRating=e.value,this.onSubmit()}}},Me=Fe,Re=(n(2868),Object(C.a)(Me,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"customer-satisfaction",class:e.$dm("bg-white","dark:bg-slate-700"),style:{borderColor:e.widgetColor}},[n("h6",{staticClass:"title",class:e.$dm("text-slate-900","dark:text-slate-50")},[e._v("\n    "+e._s(e.title)+"\n  ")]),e._v(" "),n("div",{staticClass:"ratings"},e._l(e.ratings,(function(t){return n("button",{key:t.key,class:e.buttonClass(t),on:{click:function(n){return e.selectRating(t)}}},[e._v("\n      "+e._s(t.emoji)+"\n    ")])})),0),e._v(" "),e.isFeedbackSubmitted?e._e():n("form",{staticClass:"feedback-form",on:{submit:function(t){return t.preventDefault(),e.onSubmit()}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.feedback,expression:"feedback"}],staticClass:"form-input",class:e.inputColor,attrs:{placeholder:e.$t("CSAT.PLACEHOLDER")},domProps:{value:e.feedback},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSubmit(t)},input:function(t){t.target.composing||(e.feedback=t.target.value)}}}),e._v(" "),n("button",{staticClass:"button small",style:{background:e.widgetColor,borderColor:e.widgetColor,color:e.textColor},attrs:{disabled:e.isButtonDisabled}},[e.isUpdating&&e.feedback?n("spinner"):n("fluent-icon",{attrs:{icon:"chevron-right"}})],1)])])}),[],!1,null,"1f91202a",null).exports),Le=(n(48),n(163),n(87)),Be=n(201),Ue=function(e){var t=Object(Be.b)(window.location.search),n={url:"/api/v1/widget/integrations/dyte/add_participant_to_meeting".concat(t)};return Le.a.post(n.url,{message_id:e})},Ve=n(662);function Ne(e,t,n,r,s,a,i){try{var o=e[a](i),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,s)}function ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(n),!0).forEach((function(t){qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var He={components:{FluentIcon:p.a},props:{messageId:{type:Number,required:!0},meetingData:{type:Object,default:function(){return{}}}},data:function(){return{isLoading:!1,dyteAuthToken:"",isSDKMounted:!1}},computed:We(We({},Object(r.mapGetters)({widgetColor:"appConfig/getWidgetColor"})),{},{textColor:function(){return Object(s.c)(this.widgetColor)},meetingLink:function(){return Object(Ve.a)(this.meetingData.room_name,this.dyteAuthToken)}}),methods:{joinTheCall:function(){var e,t=this;return(e=regeneratorRuntime.mark((function e(){var n,r,s,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.prev=1,e.next=4,Ue(t.messageId);case 4:n=e.sent,r=n.data,s=(r=void 0===r?{}:r).authResponse,a=(s=void 0===s?{}:s).authToken,i=void 0===a?"":a,t.dyteAuthToken=i,e.next=15;break;case 13:e.prev=13,e.t0=e.catch(1);case 15:return e.prev=15,t.isLoading=!1,e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,13,15,18]])})),function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function i(e){Ne(a,r,s,i,o,"next",e)}function o(e){Ne(a,r,s,i,o,"throw",e)}i(void 0)}))})()},leaveTheRoom:function(){this.dyteAuthToken=""}}},Ge=He,Ke=(n(2869),{name:"AgentMessageBubble",components:{ChatArticle:we,ChatCard:ue,ChatForm:fe,ChatOptions:Oe,EmailInput:Ae,CustomerSatisfaction:Re,IntegrationCard:Object(C.a)(Ge,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("button",{staticClass:"button join-call-button",style:{background:e.widgetColor,borderColor:e.widgetColor,color:e.textColor},attrs:{"color-scheme":"secondary","is-loading":e.isLoading},on:{click:e.joinTheCall}},[n("fluent-icon",{staticClass:"mr-2",attrs:{icon:"video-add"}}),e._v("\n    "+e._s(e.$t("INTEGRATIONS.DYTE.CLICK_HERE_TO_JOIN"))+"\n  ")],1),e._v(" "),e.dyteAuthToken?n("div",{staticClass:"video-call--container"},[n("iframe",{attrs:{src:e.meetingLink,allow:"camera;microphone;fullscreen;display-capture;picture-in-picture;clipboard-write;"}}),e._v(" "),n("button",{staticClass:"button small join-call-button leave-room-button",on:{click:e.leaveTheRoom}},[e._v("\n      "+e._s(e.$t("INTEGRATIONS.DYTE.LEAVE_THE_ROOM"))+"\n    ")])]):e._e()])}),[],!1,null,"45604e1d",null).exports},mixins:[N.a,S.a],props:{message:{type:String,default:null},contentType:{type:String,default:null},messageType:{type:Number,default:null},messageId:{type:Number,default:null},messageContentAttributes:{type:Object,default:function(){}}},computed:{isTemplate:function(){return 3===this.messageType},isTemplateEmail:function(){return"input_email"===this.contentType},isCards:function(){return"cards"===this.contentType},isOptions:function(){return"input_select"===this.contentType},isForm:function(){return"form"===this.contentType},isArticle:function(){return"article"===this.contentType},isCSAT:function(){return"input_csat"===this.contentType},isIntegrations:function(){return"integrations"===this.contentType}},methods:{onResponse:function(e){this.$store.dispatch("message/update",e)},onOptionSelect:function(e){this.onResponse({submittedValues:[e],messageId:this.messageId})},onFormSubmit:function(e){var t=Object.keys(e).map((function(t){return{name:t,value:e[t]}}));this.onResponse({submittedValues:t,messageId:this.messageId})}}}),Ye=(n(2870),Object(C.a)(Ke,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"chat-bubble-wrap"},[e.isCards||e.isOptions||e.isForm||e.isArticle||e.isCards||e.isCSAT?e._e():n("div",{staticClass:"chat-bubble agent",class:e.$dm("bg-white","dark:bg-slate-700")},[n("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:e.formatMessage(e.message,!1),expression:"formatMessage(message, false)"}],staticClass:"message-content",class:e.$dm("text-black-900","dark:text-slate-50")}),e._v(" "),e.isTemplateEmail?n("email-input",{attrs:{"message-id":e.messageId,"message-content-attributes":e.messageContentAttributes}}):e._e(),e._v(" "),e.isIntegrations?n("integration-card",{attrs:{"message-id":e.messageId,"meeting-data":e.messageContentAttributes.data}}):e._e()],1),e._v(" "),e.isOptions?n("div",[n("chat-options",{attrs:{title:e.message,options:e.messageContentAttributes.items,"hide-fields":!!e.messageContentAttributes.submitted_values},on:{click:e.onOptionSelect}})],1):e._e(),e._v(" "),e.isForm&&!e.messageContentAttributes.submitted_values?n("chat-form",{attrs:{items:e.messageContentAttributes.items,"button-label":e.messageContentAttributes.button_label,"submitted-values":e.messageContentAttributes.submitted_values},on:{submit:e.onFormSubmit}}):e._e(),e._v(" "),e.isCards?n("div",e._l(e.messageContentAttributes.items,(function(e){return n("chat-card",{key:e.title,attrs:{"media-url":e.media_url,title:e.title,description:e.description,actions:e.actions}})})),1):e._e(),e._v(" "),e.isArticle?n("div",[n("chat-article",{attrs:{items:e.messageContentAttributes.items}})],1):e._e(),e._v(" "),e.isCSAT?n("customer-satisfaction",{attrs:{"message-content-attributes":e.messageContentAttributes.submitted_values,"message-id":e.messageId}}):e._e()],1)}),[],!1,null,"5cb3be16",null).exports),Ze=n(60),Xe=n(140),Je=n(223);function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,s,a=[],i=!0,o=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(c){o=!0,s=c}finally{try{i||null==n.return||n.return()}finally{if(o)throw s}}return a}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return et(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tt={name:"AgentMessage",components:{AgentMessageBubble:Ye,ImageBubble:H,Thumbnail:Ze.a,UserMessage:re,FileBubble:K},mixins:[Y.a,j.a,Z,S.a],props:{message:{type:Object,default:function(){}}},data:function(){return{hasImageError:!1}},computed:{shouldDisplayAgentMessage:function(){return!("input_select"===this.contentType&&this.messageContentAttributes.submitted_values&&!this.message.content)&&this.message.content},readableTime:function(){var e=this.message.created_at,t=void 0===e?"":e;return this.messageStamp(t,"LLL d yyyy, h:mm a")},messageType:function(){var e=this.message.message_type;return void 0===e?1:e},contentType:function(){var e=this.message.content_type;return void 0===e?"":e},agentName:function(){return this.message.message_type===Xe.b.TEMPLATE?"Bot":this.message.sender?this.message.sender.available_name||this.message.sender.name:"Bot"},avatarUrl:function(){var e=n(2637),t=this.useInboxAvatarForBot?this.inboxAvatarUrl:e;return this.message.message_type===Xe.b.TEMPLATE?t:this.message.sender?this.message.sender.avatar_url:t},hasRecordedResponse:function(){return this.messageContentAttributes.submitted_email||this.messageContentAttributes.submitted_values&&!["form","input_csat"].includes(this.contentType)},responseMessage:function(){if(this.messageContentAttributes.submitted_email)return{content:this.messageContentAttributes.submitted_email};if(this.messageContentAttributes.submitted_values&&"input_select"===this.contentType){var e=Qe(this.messageContentAttributes.submitted_values,1)[0],t=void 0===e?{}:e;return{content:t.title||t.value}}return""},isASubmittedForm:function(){return Object(Je.b)(this.message)},submittedFormValues:function(){return this.messageContentAttributes.submitted_values.map((function(e){return{id:e.name,content:e.value}}))},wrapClass:function(){return{"has-text":this.shouldDisplayAgentMessage}}},watch:{message:function(){this.hasImageError=!1}},mounted:function(){this.hasImageError=!1},methods:{onImageLoadError:function(){this.hasImageError=!0}}},nt={components:{AgentMessage:Object(C.a)(tt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"agent-message-wrap",class:{"has-response":e.hasRecordedResponse||e.isASubmittedForm}},[e.isASubmittedForm?e._e():n("div",{staticClass:"agent-message"},[n("div",{staticClass:"avatar-wrap"},[e.message.showAvatar||e.hasRecordedResponse?n("thumbnail",{attrs:{src:e.avatarUrl,size:"24px",username:e.agentName}}):e._e()],1),e._v(" "),n("div",{staticClass:"message-wrap"},[e.shouldDisplayAgentMessage?n("AgentMessageBubble",{attrs:{"content-type":e.contentType,"message-content-attributes":e.messageContentAttributes,"message-id":e.message.id,"message-type":e.messageType,message:e.message.content}}):e._e(),e._v(" "),e.hasAttachments?n("div",{staticClass:"chat-bubble has-attachment agent",class:(e.wrapClass,e.$dm("bg-white","dark:bg-slate-700"))},e._l(e.message.attachments,(function(t){return n("div",{key:t.id},["image"!==t.file_type||e.hasImageError?"audio"===t.file_type?n("audio",{attrs:{controls:""}},[n("source",{attrs:{src:t.data_url}})]):n("file-bubble",{attrs:{url:t.data_url}}):n("image-bubble",{attrs:{url:t.data_url,thumb:t.data_url,"readable-time":e.readableTime},on:{error:e.onImageLoadError}})],1)})),0):e._e(),e._v(" "),e.message.showAvatar||e.hasRecordedResponse?n("p",{staticClass:"agent-name",class:e.$dm("text-slate-700","dark:text-slate-200")},[e._v("\n        "+e._s(e.agentName)+"\n      ")]):e._e()],1)]),e._v(" "),e.hasRecordedResponse?n("UserMessage",{attrs:{message:e.responseMessage}}):e._e(),e._v(" "),e.isASubmittedForm?n("div",e._l(e.submittedFormValues,(function(e){return n("UserMessage",{key:e.id,attrs:{message:e}})})),1):e._e()],1)}),[],!1,null,null,null).exports,UserMessage:re},props:{message:{type:Object,default:function(){}}},computed:{isUserMessage:function(){return this.message.message_type===Xe.b.INCOMING}}},rt=(n(2871),Object(C.a)(nt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isUserMessage?n("UserMessage",{attrs:{message:e.message}}):n("AgentMessage",{attrs:{message:e.message}})}),[],!1,null,"1124328c",null).exports),st={name:"AgentTypingBubble",mixins:[S.a]},at=(n(2873),Object(C.a)(st,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"agent-message-wrap"},[r("div",{staticClass:"agent-message"},[r("div",{staticClass:"avatar-wrap"}),e._v(" "),r("div",{staticClass:"message-wrap"},[r("div",{staticClass:"typing-bubble chat-bubble agent",class:e.$dm("bg-white","dark:bg-slate-50")},[r("img",{attrs:{src:n(2872),alt:"Agent is typing a message"}})])])])])}),[],!1,null,"1877ef14",null).exports),it=n(554),ot={mixins:[S.a],props:{date:{type:String,required:!0}},computed:{formattedDate:function(){return Object(it.a)({date:this.date,todayText:this.$t("TODAY"),yesterdayText:this.$t("YESTERDAY")})}}};n(2874);function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ut(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dt={name:"ConversationWrap",components:{ChatMessage:rt,AgentTypingBubble:at,DateSeparator:Object(C.a)(ot,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"date--separator",class:e.$dm("text-slate-700","dark:text-slate-200")},[e._v("\n  "+e._s(e.formattedDate)+"\n")])}),[],!1,null,"0619d2c7",null).exports,Spinner:u.a},mixins:[S.a],props:{groupedMessages:{type:Array,default:function(){return[]}}},data:function(){return{previousScrollHeight:0,previousConversationSize:0}},computed:ut(ut({},Object(r.mapGetters)({earliestMessage:"conversation/getEarliestMessage",allMessagesLoaded:"conversation/getAllMessagesLoaded",isFetchingList:"conversation/getIsFetchingList",conversationSize:"conversation/getConversationSize",isAgentTyping:"conversation/getIsAgentTyping"})),{},{colorSchemeClass:function(){return"".concat("light"===this.darkMode?"light":"dark")}}),watch:{allMessagesLoaded:function(){this.previousScrollHeight=0}},mounted:function(){this.$el.addEventListener("scroll",this.handleScroll),this.scrollToBottom()},updated:function(){this.previousConversationSize!==this.conversationSize&&(this.previousConversationSize=this.conversationSize,this.scrollToBottom())},unmounted:function(){this.$el.removeEventListener("scroll",this.handleScroll)},methods:ut(ut({},Object(r.mapActions)("conversation",["fetchOldConversations"])),{},{scrollToBottom:function(){var e=this.$el;e.scrollTop=e.scrollHeight-this.previousScrollHeight,this.previousScrollHeight=0},handleScroll:function(){this.isFetchingList||this.allMessagesLoaded||!this.conversationSize||this.$el.scrollTop<100&&(this.fetchOldConversations({before:this.earliestMessage.id}),this.previousScrollHeight=this.$el.scrollHeight)}})};n(2875);function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ft={components:{ChatFooter:V,ConversationWrap:Object(C.a)(dt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"conversation--container",class:e.colorSchemeClass},[n("div",{staticClass:"conversation-wrap",class:{"is-typing":e.isAgentTyping}},[e.isFetchingList?n("div",{staticClass:"message--loader"},[n("spinner")],1):e._e(),e._v(" "),e._l(e.groupedMessages,(function(t){return n("div",{key:t.date,staticClass:"messages-wrap"},[n("date-separator",{attrs:{date:t.date}}),e._v(" "),e._l(t.messages,(function(e){return n("chat-message",{key:e.id,attrs:{message:e}})}))],2)})),e._v(" "),e.isAgentTyping?n("agent-typing-bubble"):e._e()],2)])}),[],!1,null,"7f2de520",null).exports},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){pt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(r.mapGetters)({groupedMessages:"conversation/getGroupedConversation"})),mounted:function(){this.$store.dispatch("conversation/setUserLastSeen")}},gt=ft,bt=Object(C.a)(gt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-col flex-1 overflow-hidden"},[n("div",{staticClass:"flex flex-1 overflow-auto"},[n("conversation-wrap",{attrs:{"grouped-messages":e.groupedMessages}})],1),e._v(" "),n("div",{staticClass:"px-5"},[n("chat-footer")],1)])}),[],!1,null,null,null);t.default=bt.exports},342:function(e,t,n){"use strict";n(30);var r={props:{placeholder:{type:String,default:""},value:{type:String,default:""},minHeight:{type:Number,default:2}},data:function(){return{idleTimer:null}},watch:{value:function(){this.resizeTextarea()}},mounted:function(){var e=this;this.$nextTick((function(){e.value&&e.resizeTextarea()}))},methods:{resizeTextarea:function(){this.value?this.$el.style.height="".concat(this.$el.scrollHeight,"px"):this.$el.style.height="".concat(this.minHeight,"rem")},onInput:function(e){this.$emit("input",e.target.value),this.resizeTextarea()},resetTyping:function(){this.$emit("typing-off"),this.idleTimer=null},turnOffIdleTimer:function(){this.idleTimer&&clearTimeout(this.idleTimer)},onKeyup:function(){var e=this;this.idleTimer||this.$emit("typing-on"),this.turnOffIdleTimer(),this.idleTimer=setTimeout((function(){return e.resetTyping()}),4e3)},onBlur:function(){this.turnOffIdleTimer(),this.resetTyping(),this.$emit("blur")},onFocus:function(){this.$emit("focus")},focus:function(){this.$refs.textarea.focus()}}},s=n(1),a=Object(s.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("textarea",{ref:"textarea",attrs:{placeholder:e.placeholder},domProps:{value:e.value},on:{input:e.onInput,focus:e.onFocus,keyup:e.onKeyup,blur:e.onBlur}})}),[],!1,null,null,null);t.a=a.exports},503:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return s}));n(658);var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=1024,r=t<0?0:t,s=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],a=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,a)).toFixed(r))+" "+s[a]},s=function(e,t){var n,r=(null===e||void 0===e||null===(n=e.file)||void 0===n?void 0:n.size)||(null===e||void 0===e?void 0:e.size);return r/1048576<=t}},564:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));n(563),n(48),n(67);var r=function(){var e=12*(window.devicePixelRatio||1),t=document.createElement("canvas");if(!t.getContext||!t.getContext("2d")||"function"!==typeof t.getContext("2d").fillText)return!1;var n=t.getContext("2d");return n.fillStyle="#f00",n.textBaseline="top",n.font="32px Arial",n.fillText("\ud83d\udc28",0,0),0!==n.getImageData(e,e,1,1).data[0]},s=function(e){return e?e.replace(/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g,"").replace(/\s+/g," ").trim():""}},60:function(e,t,n){"use strict";n(30),n(48),n(67),n(32),n(226),n(163);var r={name:"Avatar",props:{username:{type:String,default:""},size:{type:Number,default:40}},computed:{style:function(){return{fontSize:"".concat(Math.floor(this.size/2.5),"px")}},userInitial:function(){var e=this.username.split(/[ -]/).reduce((function(e,t){return e+t.charAt(0)}),"");return e.length>2&&-1!==e.search(/[A-Z]/)&&(e=e.replace(/[a-z]+/g,"")),e=e.substring(0,2).toUpperCase()}}},s=(n(1911),n(1)),a=Object(s.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"avatar-container",style:e.style,attrs:{"aria-hidden":"true"}},[e._v("\n  "+e._s(e.userInitial)+"\n")])}),[],!1,null,"fce88f76",null).exports,i=n(564),o={components:{Avatar:a},props:{src:{type:String,default:""},size:{type:String,default:"40px"},badge:{type:String,default:""},username:{type:String,default:""},status:{type:String,default:""},hasBorder:{type:Boolean,default:!1},shouldShowStatusAlways:{type:Boolean,default:!1},title:{type:String,default:""},variant:{type:String,default:"circle"}},data:function(){return{hasImageLoaded:!1,imgError:!1}},computed:{userNameWithoutEmoji:function(){return Object(i.b)(this.username)},showStatusIndicator:function(){return!!this.shouldShowStatusAlways||("online"===this.status||"busy"===this.status)},avatarSize:function(){return Number(this.size.replace(/\D+/g,""))},badgeSrc:function(){return{instagram_direct_message:"instagram-dm",facebook:"messenger","twitter-tweet":"twitter-tweet","twitter-dm":"twitter-dm",whatsapp:"whatsapp",sms:"sms","Channel::Line":"line","Channel::Telegram":"telegram","Channel::WebWidget":""}[this.badge]},badgeStyle:function(){var e=Math.floor(this.avatarSize/3),t="".concat(e+2,"px");return{width:t,height:t,borderRadius:"".concat(e/2,"px")}},statusStyle:function(){var e="".concat(this.avatarSize/4,"px");return{width:e,height:e}},thumbnailClass:function(){var e=this.hasBorder?"border":"",t="circle"===this.variant?"thumbnail-rounded":"thumbnail-square";return"user-thumbnail ".concat(e," ").concat(t)},thumbnailBoxClass:function(){var e="circle"===this.variant?"is-rounded":"";return"user-thumbnail-box ".concat(e)},shouldShowImage:function(){return!!this.src&&(!!this.hasImageLoaded&&!this.imgError)}},watch:{src:function(e,t){e!==t&&this.imgError&&(this.imgError=!1)}},methods:{onImgError:function(){this.imgError=!0},onImgLoad:function(){this.hasImageLoaded=!0}}},c=(n(1912),Object(s.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.thumbnailBoxClass,style:{height:e.size,width:e.size},attrs:{title:e.title}},[n("img",{directives:[{name:"show",rawName:"v-show",value:e.shouldShowImage,expression:"shouldShowImage"}],class:e.thumbnailClass,attrs:{src:e.src},on:{load:e.onImgLoad,error:e.onImgError}}),e._v(" "),n("Avatar",{directives:[{name:"show",rawName:"v-show",value:!e.shouldShowImage,expression:"!shouldShowImage"}],class:e.thumbnailClass,attrs:{username:e.userNameWithoutEmoji,size:e.avatarSize}}),e._v(" "),e.badgeSrc?n("img",{staticClass:"source-badge",style:e.badgeStyle,attrs:{src:"/integrations/channels/badges/"+e.badgeSrc+".png",alt:"Badge"}}):e._e(),e._v(" "),e.showStatusIndicator?n("div",{class:"source-badge user-online-status user-online-status--"+e.status,style:e.statusStyle}):e._e()],1)}),[],!1,null,"4240ad79",null));t.a=c.exports},651:function(e,t,n){},652:function(e,t,n){},653:function(e,t,n){"use strict";n(7);var r={props:{block:{type:Boolean,default:!1},type:{type:String,default:"blue"},bgColor:{type:String,default:""},textColor:{type:String,default:""},disabled:{type:Boolean,default:!1}},computed:{buttonClassName:function(){var e="text-white py-3 px-4 rounded shadow-sm";return"clear"===this.type&&(e="flex mx-auto mt-4 text-xs w-auto text-black-600"),"blue"!==this.type||Object.keys(this.buttonStyles).length||(e="".concat(e," bg-woot-500 hover:bg-woot-700")),this.block&&(e="".concat(e," w-full")),e},buttonStyles:function(){var e={};return this.bgColor&&(e.backgroundColor=this.bgColor),this.textColor&&(e.color=this.textColor),e}},methods:{onClick:function(e){this.$emit("click",e)}}},s=n(1),a=Object(s.a)(r,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{class:e.buttonClassName,style:e.buttonStyles,attrs:{disabled:e.disabled},on:{click:e.onClick}},[e._t("default")],2)}),[],!1,null,null,null);t.a=a.exports},662:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(32);var r=function(e,t){return"".concat("https://app.dyte.in/meeting/stage/").concat(e,"?authToken=").concat(t,"&showSetupScreen=true&disableVideoBackground=true")}},92:function(e,t,n){"use strict";n(48),n(67);var r=n(119),s=n(108),a=n(664);t.a={methods:{messageStamp:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h:mm a",n=Object(r.a)(e);return Object(s.a)(n,t)},dynamicTime:function(e){var t=Object(r.a)(e);return Object(a.a)(t,{addSuffix:!0})},dateFormat:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MMM d, yyyy",n=Object(r.a)(e);return Object(s.a)(n,t)},shortTimestamp:function(e){return e.replace(/about|over|almost|/g,"").replace("less than a minute ago","now").replace(" minute ago","m").replace(" minutes ago","m").replace("a minute ago","m").replace("an hour ago","h").replace(" hour ago","h").replace(" hours ago","h").replace(" day ago","d").replace("a day ago","d").replace(" days ago","d").replace("a month ago","mo").replace(" months ago","mo").replace(" month ago","mo").replace("a year ago","y").replace(" year ago","y").replace(" years ago","y")}}}}}]);
//# sourceMappingURL=17-ef194caf1e69948f73f9.chunk.js.map